<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quejas y Sugerencias</title>

  <!-- Fuente -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sauce+One&display=swap" rel="stylesheet" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
  
  <!-- CSS -->
  <link rel="stylesheet" href="../../style/quejas-lista.css" />
  <link rel="stylesheet" href="../../style/main.css" />
</head>

<body>

  <!-- HEADER -->
  <header>
    <nav>
      <div class="container-fluid pt-3 contenedor-nav">
        <div class="row">

          <!-- LOGO -->
          <div class="col-4">
            <a href="../../index.html">
              <img class="navbar-brand-img" src="../../images/LogoUpsitos.png" alt="Logo">
            </a>
          </div>

          <!-- ICONOS DERECHA -->
          <div class="col-8 text-end herramientas d-flex justify-content-end">

            <!-- BOT√ìN USUARIO -->
            <button type="button" class="btn border-0 bg-transparent me-3"
              onclick="window.location.href='infousuario-admin.html'">
              <img class="img-user" src="../../images/usuario.png" alt="Usuario" style="width:35px; height:35px;">
            </button>


          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- BOT√ìN REGRESAR -->
  <a href="infousuario-admin.html" class="btn-regresar">
    <i class="fa-solid fa-arrow-left"></i>
  </a>

  <!-- PESTA√ëAS SUPERIORES -->
  <div class="tabs-usuario">
    <button class="tab active">Ventas</button>
    <button class="tab" onclick="window.location.href='dashboard-admin.html'">Dashboard</button>
    <button class="tab" onclick="window.location.href='membreciaestadistica.html'">Membres√≠as</button>
  </div>

  <!-- SUBPESTA√ëAS -->
  <div class="subtabs">
    <button class="subtab" onclick="window.location.href='estadisticas-ventas.html'">Estad√≠sticas</button>
    <button class="subtab active">Quejas y sugerencias</button>
  </div>

  <!-- CONTENIDO PRINCIPAL -->
  <section class="container mt-4 contenido-quejas">
    <h3 class="text-center mb-4" style="color: #fc4b08; font-weight: bold;">Quejas y Sugerencias</h3>

    <!-- TABS PARA TIPOS DE QUEJAS -->
    <ul class="nav nav-tabs mb-3" id="quejasTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="quejas-usuario-tab" data-bs-toggle="tab" 
                data-bs-target="#quejas-usuario-content" type="button" role="tab">
          <i class="fas fa-user"></i> Quejas de Usuario
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="quejas-venta-tab" data-bs-toggle="tab" 
                data-bs-target="#quejas-venta-content" type="button" role="tab">
          <i class="fas fa-shopping-cart"></i> Quejas de Venta
        </button>
      </li>
    </ul>

    <!-- CONTENIDO DE TABS -->
    <div class="tab-content" id="quejasTabContent">
      
      <!-- TAB: QUEJAS DE USUARIO -->
      <div class="tab-pane fade show active" id="quejas-usuario-content" role="tabpanel">
        <div class="tabla-quejas">
          <table class="table table-bordered">
            <thead class="tabla-header">
              <tr>
                <th>Usuario</th>
                <th>Correo</th>
                <th>T√≠tulo de publicaci√≥n</th>
                <th>Fotos de publicaci√≥n</th>
                <th>Queja</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tablaBody">
              <tr>
                <td colspan="6" class="text-center">Cargando...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- TAB: QUEJAS DE VENTA -->
      <div class="tab-pane fade" id="quejas-venta-content" role="tabpanel">
        <div class="tabla-quejas">
          <table class="table table-bordered table-hover">
            <thead class="tabla-header">
              <tr>
                <th>ID</th>
                <th>ID Venta</th>
                <th>Emisor</th>
                <th>Tipo Problema</th>
                <th>Tipo Pago</th>
                <th>Comprador</th>
                <th>Vendedor</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tbody-quejas-venta">
              <tr>
                <td colspan="9" class="text-center">Cargando quejas de venta...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </section>

  <!-- MODAL PARA VER DETALLE DE QUEJA DE USUARIO -->
  <div class="modal fade" id="modalDetalleQuejaUsuario" tabindex="-1" aria-labelledby="modalDetalleQuejaLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalDetalleQuejaLabel">Detalle de la Queja de Usuario</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- INFO HEADER -->
          <div class="info-header mb-4">
            <div class="row">
              <div class="col-md-4">
                <p class="info-label">ID Usuario:</p>
                <p class="info-value" id="detalleIdUsuario">#000000</p>
              </div>
              <div class="col-md-4">
                <p class="info-label">Usuario:</p>
                <p class="info-value" id="detalleUsuario">Ricardo Ima...</p>
              </div>
              <div class="col-md-4">
                <p class="info-label">Fecha y hora:</p>
                <p class="info-value" id="detalleFecha">27/07/20...</p>
              </div>
            </div>
          </div>

          <!-- DESCRIPCI√ìN DE LA QUEJA -->
          <div class="descripcion-queja">
            <h6 class="mb-3" style="color: #333; font-weight: bold;">Descripci√≥n de queja</h6>
            <div class="queja-contenido" id="detalleDescripcion">
              <!-- Texto de la queja -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          <button type="button" class="btn btn-primary" onclick="window.abrirModalRespuesta()">Responder</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL PARA RESPONDER QUEJA -->
  <div class="modal fade" id="modalResponderQueja" tabindex="-1" aria-labelledby="modalResponderQuejaLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalResponderQuejaLabel">Responder Queja</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <textarea class="form-control" id="respuestaTexto" rows="10" placeholder="Escribe tu respuesta"></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn-enviar" onclick="window.enviarRespuesta()">Enviar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL PARA VER IM√ÅGENES -->
  <div class="modal fade" id="modalImagenes" tabindex="-1" aria-labelledby="modalImagenesLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalImagenesLabel">Im√°genes de la Publicaci√≥n</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <div id="carouselImagenes" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" id="imagenesCarousel">
              <!-- Im√°genes din√°micas -->
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselImagenes" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Anterior</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselImagenes" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Siguiente</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== MODALES PARA QUEJAS DE VENTA ========== -->
  
  <!-- MODAL PARA VER EVIDENCIAS -->
  <div class="modal fade" id="modalEvidencias" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Evidencias de Queja</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="modal-evidencias-body">
          <!-- Contenido din√°mico -->
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DETALLE COMPLETO DE QUEJA DE VENTA -->
  <div class="modal fade" id="modalDetalleQueja" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Detalle Completo de Queja de Venta</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          
          <!-- INFO GENERAL -->
          <div class="row mb-4">
            <div class="col-md-3">
              <strong>ID Queja:</strong><br>
              <span id="detalle-id-queja" class="text-muted">-</span>
            </div>
            <div class="col-md-3">
              <strong>ID Venta:</strong><br>
              <span id="detalle-id-venta" class="text-muted">-</span>
            </div>
            <div class="col-md-3">
              <strong>Tipo Problema:</strong><br>
              <span id="detalle-tipo-problema" class="badge bg-danger">-</span>
            </div>
            <div class="col-md-3">
              <strong>Fecha:</strong><br>
              <span id="detalle-fecha" class="text-muted">-</span>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-12">
              <strong>Descripci√≥n:</strong><br>
              <p id="detalle-descripcion" class="border p-2 rounded bg-light">-</p>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <strong>Estado:</strong><br>
              <span id="detalle-estado">-</span>
            </div>
            <div class="col-md-6">
              <strong>Tipo de Pago:</strong><br>
              <span id="detalle-tipo-pago" class="badge bg-info">-</span>
            </div>
          </div>

          <hr>

          <!-- COMPARATIVA DE PARTES INVOLUCRADAS -->
          <h6 class="text-center mb-3" style="color: #fc4b08;">‚öñÔ∏è Partes Involucradas</h6>
          
          <div class="row">
            <!-- EMISOR (Quien report√≥) -->
            <div class="col-md-4 mb-3">
              <div class="card border-warning">
                <div class="card-header bg-warning text-white">
                  <i class="fas fa-user-shield"></i> EMISOR (Quien reporta)
                </div>
                <div class="card-body">
                  <p><strong>Nombre:</strong><br><span id="detalle-emisor-nombre">-</span></p>
                  <p><strong>Correo:</strong><br><span id="detalle-emisor-correo">-</span></p>
                </div>
              </div>
            </div>

            <!-- COMPRADOR -->
            <div class="col-md-4 mb-3">
              <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                  <i class="fas fa-shopping-bag"></i> COMPRADOR
                </div>
                <div class="card-body">
                  <p><strong>ID:</strong><br><span id="detalle-comprador-id">-</span></p>
                  <p><strong>Nombre:</strong><br><span id="detalle-comprador-nombre">-</span></p>
                  <p><strong>Correo:</strong><br><span id="detalle-comprador-correo">-</span></p>
                  <button class="btn btn-danger btn-sm w-100" id="btn-banear-comprador">
                    <i class="fas fa-ban"></i> Banear Comprador
                  </button>
                </div>
              </div>
            </div>

            <!-- VENDEDOR -->
            <div class="col-md-4 mb-3">
              <div class="card border-success">
                <div class="card-header bg-success text-white">
                  <i class="fas fa-store"></i> VENDEDOR
                </div>
                <div class="card-body">
                  <p><strong>ID:</strong><br><span id="detalle-vendedor-id">-</span></p>
                  <p><strong>Nombre:</strong><br><span id="detalle-vendedor-nombre">-</span></p>
                  <p><strong>Correo:</strong><br><span id="detalle-vendedor-correo">-</span></p>
                  <button class="btn btn-danger btn-sm w-100" id="btn-banear-vendedor">
                    <i class="fas fa-ban"></i> Banear Vendedor
                  </button>
                </div>
              </div>
            </div>
          </div>

          <hr>

          <!-- ACCIONES ADMINISTRATIVAS -->
          <div class="text-center">
            <h6 style="color: #fc4b08;">Resoluci√≥n de Queja</h6>
            <button class="btn btn-success me-2" id="btn-resolver-queja">
              <i class="fas fa-check"></i> Marcar como Resuelta
            </button>
            <button class="btn btn-secondary" id="btn-desestimar-queja">
              <i class="fas fa-times"></i> Desestimar Queja
            </button>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="pie-pagina">
    <div class="d-flex justify-content-end mb-2">
      <img src="../../images/X.png" alt="X" />
      <img src="../../images/instragram.png" alt="Instagram" />
      <img src="../../images/facebook.png" alt="Facebook" />
    </div>

    <p><strong>Contactos:</strong></p>
    <p class="mb-0">üìû 9613064346</p>
    <p>‚úâ 251243@ids.upchiapas.edu.mx</p>
  </footer>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="../../js/quejas-lista.js"></script>
  <script type="module" src="../../js/quejas-ventas-admin.js"></script>

</body>

</html>
